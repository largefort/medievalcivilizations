<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Medieval Clicker</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
  <style>
    body {
      font-family: 'MedievalFont', serif;
      background-color: #271e14; /* Updated background color */
      color: #f7dfc4;
      margin: 0;
      padding: 0;
    }

    .container {
      background-color: rgba(0, 0, 0, 0.6);
      border: 5px solid #9b7838; /* Updated border color */
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      margin-top: 50px;
    }

    .nav-pills .nav-link {
      font-size: 18px;
      padding: 10px 20px;
      background-color: #9b7838; /* Updated background color */
      border-radius: 10px;
      border: none;
      color: #FFD700;
      margin: 5px;
      transition: background-color 0.3s, color 0.3s;
    }

    .nav-pills .nav-link.active {
      background-color: #5a3921;
      color: #FFD700;
      font-weight: bold;
    }

    .upgrade {
      font-size: 18px;
      color: #f7dfc4;
      background-color: #9b7838; /* Updated background color */
      border: 2px solid #5a3921;
      padding: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      border-radius: 10px;
    }

    .upgrade:hover {
      background-color: #5a3921;
      color: #ffcc00;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: #271e14; /* Updated modal background color */
      color: #f7dfc4;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      color: #f7dfc4;
      cursor: pointer;
    }

    .castle-image {
      border: 5px solid #573509; /* Updated border color */
      border-radius: 10px;
      max-width: 100%;
      height: auto;
    }

    @font-face {
      font-family: 'MedievalFont';
      src: url('https://raw.githubusercontent.com/largefort/medievalclicker/main/medievalfont.woff') format('woff');
    }
     .chat-messages {
            height: 350px;
            overflow-y: auto;
            padding: 5px;
            margin-bottom: 5px;
        }
        .chat-input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
        }
        .server-selection-container, .login-container {
            display: none; /* Hidden by default, show via JavaScript */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
  </style>
  <meta name="google-adsense-account" content="your-google-adsense-account">
  <script async src="https://pagead2.googlesyndication.com/pagead/js?client=your-google-adsense-account" crossorigin="anonymous"></script>
</head>

</head>
<body>
<div class="container">
  <div class="tab-content">
    <div class="tab-pane fade show active" id="castle-tab">
      <div class="text-center">
        <!-- Knight Civilization Castle Image -->
        <img id="castle" src="castle_lord.jpg" alt="Castle" class="castle-image" onclick="clickCastle()">
        <div id="counter" class="mt-3">
          Gold coins: 0
        </div>
        <div id="owned-upgrades" class="mt-3">
          <div>Knight: <span id="knight-count"><i class="fas fa-chess-knight"></i> 0</span></div>
          <div>Archer: <span id="archer-count"><i class="fas fa-bullseye"></i> 0</span></div>
          <div>Wizard: <span id="wizard-count"><i class="fas fa-hat-wizard"></i> 0</span></div>
          <div>Paladin: <span id="paladin-count"><i class="fas fa-shield-alt"></i> 0</span></div>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="skilling-tab">
      <div class="text-center">
        <h2>Skilling</h2>
        <div class="upgrade" onclick="handleSkillingClick('woodcutting')">
          <i class="fas fa-tree"></i> Woodcutting
        </div>
        <div class="upgrade" onclick="handleSkillingClick('mining')">
          <i class="fas fa-gem"></i> Mining
        </div>
        <div class="mt-3">
          <div>Woodcutting Level: <span id="woodcutting-level">1</span></div>
          <div>Mining Level: <span id="mining-level">1</span></div>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="shop-tab">
      <div class="text-center">
        <h2>Shop</h2>
        <div class="upgrade" onclick="buyUpgrade('knight')">
          <i class="fas fa-chess-knight"></i> Knight (<span id="knight-cost">10</span> coins)
        </div>
        <audio id="knight-upgrade-sound">
          <source src="upgradesound.mp3" type="audio/mp3">
          Your browser does not support the audio element.
        </audio>
        <div class="upgrade" onclick="buyUpgrade('archer')">
          <i class="fas fa-bullseye"></i> Archer (<span id="archer-cost">25</span> coins)
        </div>
        <audio id="archer-upgrade-sound">
          <source src="upgradesound.mp3" type="audio/mp3">
          Your browser does not support the audio element.
        </audio>
        <div class="upgrade" onclick="buyUpgrade('wizard')">
          <i class="fas fa-hat-wizard"></i> Wizard (<span id="wizard-cost">50</span> coins)
        </div>
        <audio id="wizard-upgrade-sound">
          <source src="upgradesound.mp3" type="audio/mp3">
          Your browser does not support the audio element.
        </audio>
        <div class="upgrade" onclick="buyUpgrade('paladin')">
          <i class="fas fa-shield-alt"></i> Paladin (<span id="paladin-cost">100</span> coins)
        </div>
        <audio id="paladin-upgrade-sound">
          <source src="upgradesound.mp3" type="audio/mp3">
          Your browser does not support the audio element.
        </audio>
      </div>
    </div>

    <div class="tab-pane fade" id="settings-tab">
      <div class="text-center">
        <h2>Settings</h2>
        <div class="form-check">
          <input type="checkbox" id="toggle-music"> <label class="form-check-label" for="toggle-music"><i class="fas fa-volume-up"></i> Toggle Music</label>
        </div>
        <div class="form-check">
          <input type="checkbox" id="toggle-sfx"> <label class="form-check-label" for="toggle-sfx"><i class="fas fa-volume-up"></i> Toggle Sound Effects</label>
        </div>
        <!-- Add the PNG image from Crazy Games with clickable URL -->
        <a href="https://idev.games/game/medieval-civilizations" target="_blank">
          <img src="idev.png" alt="idev.games image" width="100">
        </a>
      </div>
    </div>

    <div class="nav nav-pills nav-fill fixed-bottom">
      <a class="nav-link active" data-toggle="pill" href="#castle-tab">
        <i class="fas fa-chess-rook"></i> Castle
      </a>
      <a class="nav-link" data-toggle="pill" href="#skilling-tab">
        <i class="fa-solid fa-chart-simple"></i> Skilling
      </a>
      <a class="nav-link" data-toggle="pill" href="#shop-tab">
        <i class="fas fa-cart-shopping"></i> Shop
      </a>
      <a class="nav-link" data-toggle="pill" href="#settings-tab">
        <i class="fas fa-gears"></i> Settings
      </a>
    </div>
    
    <div class="chat-container" style="position: absolute; top: 10px; right: 10px; width: 300px; height: 400px; background-color: rgba(0, 0, 0, 0.6); border-radius: 10px; padding: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);">
    <div class="chat-messages" id="chat-messages" style="height: 350px; overflow-y: scroll; padding: 5px;"></div>
    <input type="text" id="chat-input" placeholder="Type a message..." style="width: 100%; box-sizing: border-box; padding: 10px; border: none; border-radius: 5px;">
</div>
<script>
// WebSocket logic already described, add this for chat
document.getElementById('chat-input').addEventListener('keypress', function(event) {
    if (event.key === 'Enter' && this.value.trim() !== '') {
        socket.send(JSON.stringify({ type: 'chat', message: this.value }));
        this.value = ''; // Clear input after sending
    }
});

socket.onmessage = function(event) {
    var data = JSON.parse(event.data);
    if (data.type === 'chat') {
        var chatMessages = document.getElementById('chat-messages');
        var msgElement = document.createElement('div');
        msgElement.textContent = data.message;
        chatMessages.appendChild(msgElement);
        chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll to latest message
    }
};
</script>

   <div id="login-container" style="position: fixed; top: 10%; right: 10%; width: 300px; background-color: rgba(0,0,0,0.6); padding: 20px; border-radius: 10px;">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" style="width: 100%; padding: 10px; margin-bottom: 10px;">
    <input type="password" id="password" placeholder="Password" style="width: 100%; padding: 10px; margin-bottom: 10px;">
    <button onclick="login()">Login</button>
    <button onclick="register()">Register</button>
</div>
<script>
function login() {
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    // Send login information to server
    console.log('Logging in:', username);
}

function register() {
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    // Send registration information to server
    console.log('Registering:', username);
}
</script>

  <div class="server-selection-container" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 600px; background-color: rgba(0,0,0,0.8); border-radius: 10px; padding: 20px; box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);">
    <h1>Select a Server</h1>
    <!-- Dynamically populated servers -->
    <div id="server-list"></div>
</div>
<script>
// Example server data fetched from the server or hardcoded for demo
const servers = [
    { name: 'Valhalla Realm', players: 342 },
    { name: 'Excalibur Court', players: 281 },
    { name: 'Dragons Keep', players: 125 },
];

const serverList = document.getElementById('server-list');
servers.forEach(server => {
    const serverButton = document.createElement('button');
    serverButton.textContent = `${server.name} - Players: ${server.players}`;
    serverButton.onclick = function() {
        // Connect to the selected server
        console.log('Connecting to ' + server.name);
    };
    serverList.appendChild(serverButton);
});
</script>

<!-- Scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="script.js"></script>
<script src="server.js"></script>     
<script src="js/index.js"></script>
<!-- Additional Scripts for New Features -->
</body>
</html>
